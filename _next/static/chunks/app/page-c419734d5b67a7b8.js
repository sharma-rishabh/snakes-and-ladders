(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1311:(t,e,s)=>{Promise.resolve().then(s.bind(s,152))},152:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>b});var i=s(5155),r=s(2115);class a{getPositions(t,e){let s=t+e,i=Array(e).fill(0).map((e,s)=>t+s+1);for(let t of this.porters)if(t.start===s){i.push(t.end);break}return i}getNextPlayerIndex(t){return 0===t?1:0}getCurrentPlayer(){return this.players.find(t=>t.isPlaying)}getOtherPlayers(t){return this.players.filter(e=>e.color!==t.color).map(t=>({...t}))}updateCurrentPlayer(){let t=this.getCurrentPlayer(),e=this.players.findIndex(t=>t.isPlaying),s=this.getNextPlayerIndex(e);return t.isPlaying=!1,this.players[s].isPlaying=!0,this.lastPlayer=t,this.players}isFirstMove(t){return -1===t.position}canMakeFirstMove(t){return 1===t||6===t}handleFirstMove(t,e){return this.canMakeFirstMove(e)&&(t.position=0,this.lastMoves=[0]),t}isOutOfBoard(t){return t[t.length-1]>99}isGameOver(t){return 99===t.position}movePlayer(t){let e=this.getCurrentPlayer();if(this.isFirstMove(e))return this.handleFirstMove(e,t),this.players;let s=this.getPositions(e.position,t);return this.isOutOfBoard(s)||(e.position=s[s.length-1],this.lastMoves=s,this.gameOver=this.isGameOver(e)),this.players}createMoves(){return this.lastMoves.map(t=>[{...this.lastPlayer,position:t},...this.getOtherPlayers(this.lastPlayer)])}getState(){let t=this.gameOver?this.getCurrentPlayer():null;return{moves:this.createMoves(),players:this.players,winner:t}}playMove(t){return this.lastMoves=[],this.movePlayer(t),this.gameOver||this.updateCurrentPlayer(),this.getState()}constructor(){this.players=[{name:"Player 1",position:-1,color:"red",isPlaying:!0},{name:"Player 2",position:-1,color:"blue",isPlaying:!1}],this.gameOver=!1,this.lastMoves=[],this.lastPlayer=this.players[this.players.length-1],this.porters=[{start:3,end:55},{start:11,end:49},{start:13,end:54},{start:21,end:57},{start:27,end:9},{start:36,end:2},{start:40,end:78},{start:46,end:15},{start:53,end:87},{start:74,end:31},{start:93,end:70},{start:95,end:41}]}}class n{generateBoard(t){let e=t=>t%2==0,s=e=>Array(10).fill(0).map((s,i)=>{let r=10*e+i;return{cellPosition:r,players:t.filter(t=>t.position===r)}});return this.board=Array(10).fill(0).map((t,e)=>e).map(t=>e(t)?s(t):s(t).reverse()).reverse().flat(),this.board}getBoard(){return this.board}constructor(){this.board=[]}}var l=s(5047),o=s.n(l);let h={src:"/snakes-and-ladders//_next/static/media/board.182ea8bc.jpg"};var c={canvas:"index-module_canvas__H2w7d"};!function(t,e){void 0===e&&(e={});var s=e.insertAt;if(t&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===s&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}(".index-module_canvas__H2w7d {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  pointer-events: none;\n}");var d=function(t,e){return Math.random()*(e-t)+t},u=function(){function t(t,e,s,i,r,a,n,l,o){void 0===s&&(s=0),void 0===r&&(r=["circle","square"]),void 0===a&&(a=12),void 0===n&&(n=30),void 0===l&&(l=1),void 0===o&&(o=.004);var h,c=window.devicePixelRatio>1?2:1;this.x=t*window.innerWidth*c,this.y=e*window.innerHeight*c,this.width=a,this.height=a,this.theta=Math.PI/180*d(s-n,s+n),this.radius=d(20*l,70*l),this.vx=this.radius*Math.cos(this.theta),this.vy=this.radius*Math.sin(this.theta),this.xFriction=.9,this.yFriction=.87,this.gravity=d(.5,.6),this.opacity=1,this.opacityDelta=o,this.rotate=d(0,360),this.widthDelta=d(0,360),this.heightDelta=d(0,360),this.rotateDelta=d(-1,1),this.colors=i,this.color={r:parseInt((h=this.colors[Math.floor(d(0,this.colors.length))]).slice(1,3),16),g:parseInt(h.slice(3,5),16),b:parseInt(h.slice(5,7),16)},this.shapes=r,this.shape=this.shapes[Math.floor(d(0,this.shapes.length))],this.swingOffset=d(0,2*Math.PI),this.swingSpeed=.05*Math.random()+.01,this.swingAmplitude=d(.1,.2)}return t.prototype.update=function(){this.vx*=this.xFriction,this.vy*=this.yFriction,this.vy+=this.gravity,this.vx+=Math.sin(this.swingOffset)*this.swingAmplitude,this.x+=this.vx,this.y+=this.vy,this.opacity-=this.opacityDelta,this.widthDelta+=2,this.heightDelta+=2,this.rotate+=this.rotateDelta,this.swingOffset+=this.swingSpeed},t.prototype.drawSquare=function(t){t.fillRect(this.x,this.y,this.width*Math.cos(Math.PI/180*this.widthDelta),this.height*Math.sin(Math.PI/180*this.heightDelta))},t.prototype.drawCircle=function(t){t.beginPath(),t.ellipse(this.x,this.y,Math.abs(this.width*Math.cos(Math.PI/180*this.widthDelta))/2,Math.abs(this.height*Math.sin(Math.PI/180*this.heightDelta))/2,0,0,2*Math.PI),t.fill(),t.closePath()},t.prototype.draw=function(t){var e=1.3*this.width,s=1.3*this.height;t.translate(this.x+e,this.y+s),t.rotate(Math.PI/100*this.rotate),t.translate(-(this.x+e),-(this.y+s)),t.fillStyle="rgba(".concat(this.color.r,", ").concat(this.color.g,", ").concat(this.color.b,", ").concat(this.opacity,")"),"square"===this.shape&&this.drawSquare(t),"circle"===this.shape&&this.drawCircle(t),t.resetTransform()},t}();function f(t){var e=t.mode,s=void 0===e?"boom":e,i=t.particleCount,a=void 0===i?30:i,n=t.shapeSize,l=void 0===n?12:n,o=t.colors,h=void 0===o?["#ff577f","#ff884b","#ffd384","#fff9b0"]:o,f="boom"===t.mode||void 0===t.mode?t:{effectInterval:1,effectCount:1/0},p=f.x,y=void 0===p?.5:p,v=f.y,g=void 0===v?.5:v,m=f.deg,x=void 0===m?270:m,w=f.spreadDeg,b=void 0===w?30:w,P=f.effectInterval,M=void 0===P?3e3:P,j=f.effectCount,C=void 0===j?1:j,N=f.launchSpeed,_=void 0===N?1:N,k=("fall"===t.mode?t:{}).fadeOutHeight,O=void 0===k?.8:k,D=(0,r.useRef)(null),I=(0,r.useRef)(),S=(0,r.useRef)([]),F=(0,r.useRef)(0),R=(0,r.useRef)(0),A=(0,r.useCallback)(function(){var t=D.current,e=null==t?void 0:t.getContext("2d");if(t&&e){I.current=e;var s=window.devicePixelRatio>1?2:1,i=window.innerWidth,r=window.innerHeight;t.style.width="".concat(i,"px"),t.style.height="".concat(r,"px"),t.width=i*s,t.height=r*s,e.scale(s,s)}},[]),E=(0,r.useCallback)(function(){for(var t="fall"===s,e=t?a/30:a,i=t?d(0,1):y,r=t?d(-.1,-.3):g,n=t?270:x,o=t?0:b,c=t?0:_,f=t?3.4/O/window.innerHeight:.004,p=0;p<e;p+=1)S.current.push(new u(i,r,n,h,["circle","square"],l,o,c,f))},[s,y,g,x,h,l,b,_,a,O]),B=(0,r.useCallback)(function(){if(I.current){var t,e,s,i=Date.now(),r=Date.now()-M,a=function(){var n=D.current;if(I.current&&n&&(F.current=requestAnimationFrame(a),e=(t=Date.now())-i,s=t-r,!(e<16.666666666666668))){I.current.clearRect(0,0,n.width,n.height),s>M&&R.current<C&&(E(),r=t-s%M,R.current+=1);for(var l=S.current,o=l.length-1;o>=0;o-=1){var h=l[o];h.update(),h.draw(I.current);var c=(null==n?void 0:n.height)||0;(h.opacity<=0||h.y>c)&&l.splice(l.indexOf(h),1)}i=t-e%16.666666666666668,R.current>=C&&0===l.length&&cancelAnimationFrame(F.current)}};F.current=requestAnimationFrame(a)}},[M,C,E]);return(0,r.useEffect)(function(){return A(),B(),function(){F.current&&cancelAnimationFrame(F.current)}},[A,B]),(0,r.useEffect)(function(){R.current=0},[C]),r.createElement("canvas",{className:c.canvas,ref:D})}let p=t=>{let{onRoll:e,randomGenerator:s}=t,[a,n]=(0,r.useState)(1),l=()=>Math.floor(6*s())+1;return(0,i.jsxs)("div",{className:"flex flex-col items-center justify-around",style:{width:"200px",height:"100px"},children:[(0,i.jsx)("h2",{children:"Click to Roll Dice"}),(0,i.jsx)("div",{style:{width:"50px",height:"50px",backgroundColor:"antiquewhite",borderRadius:"15%",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},onClick:()=>{let t=l();n(t),e(t)},children:a})]})},y=t=>{let{players:e,cellPosition:s}=t;return(0,i.jsx)("div",{id:s,className:"".concat(o().cell," flex justify-around items-center"),children:e.map((t,e)=>(0,i.jsx)(g,{player:t,size:10},e))},s)},v=t=>{let{moves:e,boardGenerator:s}=t,[a,n]=(0,r.useState)(s.getBoard());return(0,r.useEffect)(()=>{let t=e.map(t=>s.generateBoard(t)).map((t,e)=>setTimeout(()=>{n(t)},500*e));return()=>{t.forEach(t=>clearTimeout(t))}},[e]),(0,i.jsx)("div",{className:"grid grid-cols-10 gap-x-0 gap-y-0] ".concat(o().board," -z-10"),style:{"background-image":"url(".concat(h.src,")")},children:a.map(t=>{let{players:e,cellPosition:s}=t;return(0,i.jsx)(y,{players:e,cellPosition:s},s)})})},g=t=>{let{player:e,size:s}=t,r=e.isPlaying?"animate-ping":"";return(0,i.jsxs)("span",{className:"relative flex",children:[(0,i.jsx)("span",{className:"absolute inline-flex ".concat(r," opacity-75"),style:{backgroundColor:e.color,width:s,height:s,borderRadius:"50%"}}),(0,i.jsx)("span",{className:"opacity-80",style:{backgroundColor:e.color,width:s,height:s,borderRadius:"50%"}})]})},m=t=>{let{players:e}=t;return(0,i.jsxs)("div",{className:"flex flex-col items-center w-full",children:[(0,i.jsx)("h1",{children:"Players"}),(0,i.jsx)("div",{className:"flex justify-around w-full",children:e.map((t,e)=>(0,i.jsxs)("div",{className:"flex flex-col items-center justify-around h-24",children:[(0,i.jsx)("h4",{children:t.name}),(0,i.jsx)(g,{player:t,size:30})]},e))})]})},x=t=>{let{winner:e}=t;return(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center w-full h-1/3 z-10 absolute",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:[(0,i.jsxs)("h1",{className:"text-4xl text-white mb-4",children:["Winner: ",e.name]}),(0,i.jsx)(g,{player:e,size:50}),(0,i.jsx)(f,{mode:"fall",particleCount:500,colors:["#ff577f","#ff884b","#ffd384","#fff9b0"]})]})},w=t=>{let{coreSAL:e,boardGenerator:s}=t,[a,n]=(0,r.useState)(e.getState());return(0,i.jsxs)("div",{className:"flex justify-around",style:{margin:"30px"},children:[a.winner&&(0,i.jsx)(x,{winner:a.winner}),(0,i.jsx)(v,{moves:a.moves,boardGenerator:s}),(0,i.jsxs)("div",{className:"flex flex-col items-center justify-around size-1/3",children:[(0,i.jsx)(m,{players:a.players}),(0,i.jsx)(p,{onRoll:t=>{n(e.playMove(t))},randomGenerator:Math.random})]})]})};function b(){let t=new a,e=new n;return e.generateBoard([]),(0,i.jsx)(w,{coreSAL:t,boardGenerator:e})}},5047:t=>{t.exports={cell:"styles_cell__1WzH_",board:"styles_board__9sHka"}}},t=>{var e=e=>t(t.s=e);t.O(0,[64,441,517,358],()=>e(1311)),_N_E=t.O()}]);