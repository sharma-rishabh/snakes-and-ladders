(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1311:(e,t,r)=>{Promise.resolve().then(r.bind(r,685))},5047:e=>{e.exports={cell:"styles_cell__1WzH_",board:"styles_board__9sHka",boardContainer:"styles_boardContainer__kWAbe",game:"styles_game__mGn1g",playerInformation:"styles_playerInformation__40Qqs",totalScore:"styles_totalScore__jgfC7",boardImage:"styles_boardImage__PX2yg"}},685:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var s=r(5155),a=r(2115);let l=e=>{let{player:t,size:r}=e,a=t.isPlaying?"animate-ping":"";return(0,s.jsxs)("span",{className:"relative flex",children:[(0,s.jsx)("span",{className:"absolute inline-flex ".concat(a," opacity-85"),style:{backgroundColor:t.color,width:r,height:r,borderRadius:"50%"}}),(0,s.jsx)("span",{className:"opacity-80",style:{backgroundColor:t.color,width:r,height:r,borderRadius:"50%"}})]})};function i(e){let{handleSubmit:t}=e,[r,i]=(0,a.useState)([{name:"Player 1",color:"red",active:!0},{name:"Player 2",color:"blue",active:!0}]),n=["red","blue","green","purple"],o=(e,t,s)=>{let a=[...r];a[e][t]=s,i(a)};return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50",children:(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg w-96",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4 text-center",children:"Enter Player Details"}),r.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsx)("input",{type:"text",value:e.name,onChange:e=>o(t,"name",e.target.value),className:"border p-2 rounded w-70"}),(0,s.jsx)(l,{player:e,size:30})]},t)),r.length<4&&(0,s.jsx)("button",{onClick:()=>{r.length<4&&i([...r,{name:"Player ".concat(r.length+1),color:n[r.length],active:!0}])},className:"block w-full border p-2 rounded text-gray-700 text-center my-2",children:"+"}),(0,s.jsx)("button",{onClick:()=>t(r),className:"w-full bg-gray-900 text-white py-2 rounded-lg mt-4",children:"Submit"})]})})})}class n{getPositions(e,t){let r=e+t,s=Array(t).fill(0).map((t,r)=>e+r+1);for(let e of this.porters)if(e.start===r){s.push(e.end);break}return s}getNextPlayerIndex(e){return(e+1)%this.players.length}getCurrentPlayer(){return this.players.find(e=>e.isPlaying)}getOtherPlayers(e){return this.players.filter(t=>t.color!==e.color).map(e=>({...e}))}updateCurrentPlayer(){let e=this.getCurrentPlayer(),t=this.players.findIndex(e=>e.isPlaying),r=this.getNextPlayerIndex(t);return this.lastPlayer={...e},e.isPlaying=!1,this.players[r].isPlaying=!0,this.players}isFirstMove(e){return -1===e.position}canMakeFirstMove(e){return 1===e||e>=6}handleFirstMove(e,t){let r=[-1];return this.canMakeFirstMove(t)&&(e.position=0,r[0]=0),r}isOutOfBoard(e){return e>99}isGameOver(e){return 99===e.position}playOneMove(e,t){if(this.isFirstMove(t))return this.handleFirstMove(t,e);let r=this.getPositions(t.position,e);return t.position=r[r.length-1],this.gameOver=this.isGameOver(t),r}movePlayer(e){let t=e.reduce((e,t)=>e+t,0),r=this.getCurrentPlayer(),s=r.position+t;if(this.isOutOfBoard(s))return this.lastMoves=[r.position],this.players;let a=e.map(e=>this.playOneMove(e,r));return this.lastMoves=a.flat(),this.players}createMoves(){let e=this.getOtherPlayers(this.lastPlayer).map(e=>({...e,isPlaying:!1})),t=this.lastMoves.map(t=>[{...this.lastPlayer,position:t},...e]),r=[{...this.lastPlayer,isPlaying:!1},...this.getOtherPlayers(this.lastPlayer)];return t.push(r),t}getState(){let e=this.gameOver?this.getCurrentPlayer():null,t=this.createMoves(),r=this.getOtherPlayers(this.lastPlayer);return{moves:t,players:this.players,winner:e,prevPlayers:this.players.map(e=>({...e,isPlaying:!r.some(t=>t.color===e.color)}))}}playMove(e){return this.lastMoves=[],this.movePlayer(e),this.gameOver||this.updateCurrentPlayer(),this.getState()}canRollMore(e){return 6===e[e.length-1]}constructor(e){this.players=e.map(e=>({...e,position:-1,isPlaying:!1})),this.players[0].isPlaying=!0,this.gameOver=!1,this.lastMoves=[-1],this.lastPlayer=this.players[this.players.length-1],this.porters=[{start:3,end:55},{start:11,end:49},{start:13,end:54},{start:21,end:57},{start:27,end:9},{start:36,end:2},{start:40,end:78},{start:46,end:15},{start:53,end:87},{start:74,end:31},{start:93,end:70},{start:95,end:41}]}}class o{generateBoard(e,t,r){let s=e=>e%2==0,a=t=>Array(this.columns).fill(0).map((r,s)=>{let a=this.columns*t+s;return{cellPosition:a,players:e.filter(e=>e.position===a)}});return this.board=Array(this.rows).fill(0).map((e,t)=>t).map(e=>s(e)?a(e):a(e).reverse()).reverse().flat(),{board:this.board,transitioning:t!==r}}generateBoards(e){return e.map((t,r)=>this.generateBoard(t,r+1,e.length))}getBoard(){return this.board}constructor(e=10,t=10){this.board={board:[],transitioning:!1},this.rows=e,this.columns=t}}var d=r(5047),A=r.n(d);let h=e=>{let{players:t,cellPosition:r}=e;return(0,s.jsx)("div",{id:r,className:"".concat(A().cell," flex justify-around items-center"),children:t.map((e,t)=>(0,s.jsx)(l,{player:e,size:15},t))},r)};var c=r(5565);let u={src:"/snakes-and-ladders//_next/static/media/board.182ea8bc.jpg",height:555,width:559,blurDataURL:"data:image/jpeg;base64,/9j/2wBDAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/v/2wBDAQoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/v/wgARCAAIAAgDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAb/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAv/aAAwDAQACEAMQAAAAvhD/xAAaEAEAAQUAAAAAAAAAAAAAAAABAgARIiOR/9oACAEBAAE/ANxJGEsW6hwr/8QAFhEAAwAAAAAAAAAAAAAAAAAAAAEx/9oACAECAQE/AIz/xAAVEQEBAAAAAAAAAAAAAAAAAAABAP/aAAgBAwEBPwBb/9k=",blurWidth:8,blurHeight:8},g=e=>{let{moves:t,boardGenerator:r,onBoardTransitionComplete:l}=e,[i,n]=(0,a.useState)(r.getBoard());return(0,a.useEffect)(()=>{let e=r.generateBoards(t);if(0===e.length){l();return}let s=e.map((e,t)=>setTimeout(()=>{n(e.board),e.transitioning||l()},500*t));return()=>{s.forEach(e=>clearTimeout(e))}},[t]),(0,s.jsxs)("div",{className:A().boardContainer,children:[(0,s.jsx)("div",{className:"grid grid-cols-10 gap-x-0 gap-y-0] ".concat(A().board," -z-10"),children:i.map(e=>{let{players:t,cellPosition:r}=e;return(0,s.jsx)(h,{players:t,cellPosition:r,testId:"cell"},r)})}),(0,s.jsx)(c.default,{alt:"board",src:u,className:A().boardImage,fill:!0})]})};var p=r(602);let m=e=>{let{onRoll:t,randomGenerator:r,isDisabled:l}=e,[i,n]=(0,a.useState)(!1),[o,d]=(0,a.useState)(1),A=()=>Math.floor(6*r())+1;return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-around",children:[(0,s.jsx)("h2",{children:"Click to Roll Dice"}),(0,s.jsx)("div",{className:"flex justify-center items-center p-8",children:(0,s.jsx)(p.P.div,{className:"relative",style:{width:"100px",height:"100px",perspective:"600px",cursor:l?"not-allowed":"pointer"},onClick:()=>{l||i||(n(!0),setTimeout(()=>{console.log("Inside setTimeout");let e=A();d(e),t(e),n(!1)},1e3))},id:"dice",children:(0,s.jsx)(p.P.div,{className:"absolute w-full h-full",animate:i?{rotateX:[0,360],rotateY:[0,360],rotateZ:[0,360]}:{},transition:i?{duration:1.5,repeat:1,ease:"easeInOut"}:{},style:{position:"relative",width:"100px",height:"100px",transformStyle:"preserve-3d"},children:[{transform:"translateZ(50px)",text:1},{transform:"rotateY(180deg) translateZ(50px)",text:6},{transform:"rotateY(-90deg) translateZ(50px)",text:4},{transform:"rotateY(90deg) translateZ(50px)",text:o},{transform:"rotateX(90deg) translateZ(50px)",text:5},{transform:"rotateX(-90deg) translateZ(50px)",text:2}].map((e,t)=>{let{transform:r,text:a}=e;return(0,s.jsx)("div",{className:"absolute w-full h-full flex items-center justify-center text-2xl font-bold border",style:{backgroundColor:l?"gray":"antiquewhite",transform:r,position:"absolute",width:"100px",height:"100px",border:"2px solid black"},children:a},t)})})})})]})},y=e=>{let{players:t}=e;return(0,s.jsxs)("div",{className:"flex flex-col items-center w-full",children:[(0,s.jsx)("h1",{children:"Players"}),(0,s.jsx)("div",{className:"flex justify-around",children:t.map((e,t)=>(0,s.jsxs)("div",{className:"flex flex-col items-center justify-around h-24 w-24",children:[(0,s.jsx)("h4",{children:e.name}),(0,s.jsx)(l,{player:e,size:30})]},t))})]})},x=e=>{let{coreSAL:t,boardGenerator:r}=e,[l,i]=(0,a.useState)(t.getState()),[n,o]=(0,a.useState)(!1),[d,h]=(0,a.useState)([]),[c,u]=(0,a.useState)(l.prevPlayers),p=e=>{i(e),u(e.prevPlayers)};return(0,s.jsxs)("div",{className:A().game,children:[l.winner&&(0,s.jsx)(WinnerBanner,{winner:l.winner}),(0,s.jsx)(g,{moves:l.moves,boardGenerator:r,onBoardTransitionComplete:()=>{o(!1),h([]),u(l.players)}}),(0,s.jsxs)("div",{className:A().playerInformation,children:[(0,s.jsx)(y,{players:c}),(0,s.jsx)(m,{onRoll:e=>{let r=[...d,e];h(r),t.canRollMore(r)||(o(!0),p(t.playMove(r)))},randomGenerator:Math.random,isDisabled:n}),(0,s.jsxs)("h2",{className:"text-2xl font-bold mt-4 bg-gray-200 px-4 py-2 rounded-lg shadow-md ".concat(A().totalScore),children:["Dice Roll Sum :"," ",(0,s.jsx)("span",{className:"text-blue-600",children:d.reduce((e,t)=>e+t,0)})]})]})]})},f=e=>{let{players:t}=e,r=new n(t),a=new o;return a.generateBoard([],1,1),(0,s.jsx)(x,{coreSAL:r,boardGenerator:a})};function v(){let[e,t]=(0,a.useState)(!1),[r,l]=(0,a.useState)([]);return(0,s.jsxs)("div",{children:[!e&&(0,s.jsx)(i,{handleSubmit:e=>{t(!0),l(e)}}),e&&(0,s.jsx)(f,{players:r})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[64,54,441,517,358],()=>t(1311)),_N_E=e.O()}]);