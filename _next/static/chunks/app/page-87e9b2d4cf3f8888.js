(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1311:(e,t,r)=>{Promise.resolve().then(r.bind(r,927))},927:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var s=r(5155),a=r(2115);class l{getPositions(e,t){let r=e+t,s=Array(t).fill(0).map((t,r)=>e+r+1);for(let e of this.porters)if(e.start===r){s.push(e.end);break}return s}getNextPlayerIndex(e){return 0===e?1:0}getCurrentPlayer(){return this.players.find(e=>e.isPlaying)}getOtherPlayers(e){return this.players.filter(t=>t.color!==e.color).map(e=>({...e}))}updateCurrentPlayer(){let e=this.getCurrentPlayer(),t=this.players.findIndex(e=>e.isPlaying),r=this.getNextPlayerIndex(t);return this.lastPlayer={...e},e.isPlaying=!1,this.players[r].isPlaying=!0,this.players}isFirstMove(e){return -1===e.position}canMakeFirstMove(e){return 1===e||e>=6}handleFirstMove(e,t){let r=[-1];return this.canMakeFirstMove(t)&&(e.position=0,r[0]=0),r}isOutOfBoard(e){return e>99}isGameOver(e){return 99===e.position}playOneMove(e,t){if(this.isFirstMove(t))return this.handleFirstMove(t,e);let r=this.getPositions(t.position,e);return t.position=r[r.length-1],this.gameOver=this.isGameOver(t),r}movePlayer(e){let t=e.reduce((e,t)=>e+t,0),r=this.getCurrentPlayer(),s=r.position+t;if(this.isOutOfBoard(s))return this.lastMoves=[r.position],this.players;let a=e.map(e=>this.playOneMove(e,r));return this.lastMoves=a.flat(),this.players}createMoves(){let e=this.getOtherPlayers(this.lastPlayer).map(e=>({...e,isPlaying:!1})),t=this.lastMoves.map(t=>[{...this.lastPlayer,position:t},...e]),r=[{...this.lastPlayer,isPlaying:!1},...this.getOtherPlayers(this.lastPlayer)];return t.push(r),t}getState(){let e=this.gameOver?this.getCurrentPlayer():null;return{moves:this.createMoves(),players:this.players,winner:e}}playMove(e){return this.lastMoves=[],this.movePlayer(e),this.gameOver||this.updateCurrentPlayer(),this.getState()}canRollMore(e){return 6===e[e.length-1]}constructor(){this.players=[{name:"Player 1",position:-1,color:"red",isPlaying:!0},{name:"Player 2",position:-1,color:"blue",isPlaying:!1}],this.gameOver=!1,this.lastMoves=[-1],this.lastPlayer=this.players[this.players.length-1],this.porters=[{start:3,end:55},{start:11,end:49},{start:13,end:54},{start:21,end:57},{start:27,end:9},{start:36,end:2},{start:40,end:78},{start:46,end:15},{start:53,end:87},{start:74,end:31},{start:93,end:70},{start:95,end:41}]}}class i{generateBoard(e,t,r){let s=e=>e%2==0,a=t=>Array(10).fill(0).map((r,s)=>{let a=10*t+s;return{cellPosition:a,players:e.filter(e=>e.position===a)}});return this.board=Array(10).fill(0).map((e,t)=>t).map(e=>s(e)?a(e):a(e).reverse()).reverse().flat(),{board:this.board,transitioning:t!==r}}generateBoards(e){return e.map((t,r)=>this.generateBoard(t,r+1,e.length))}getBoard(){return this.board}constructor(){this.board={board:[],transitioning:!1}}}var n=r(5047),o=r.n(n),d=r(358),h=r(5565);let c=e=>{let{onRoll:t,randomGenerator:r,isDisabled:l}=e,[i,n]=(0,a.useState)(1),o=()=>Math.floor(6*r())+1;return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-around",style:{width:"200px",height:"100px"},children:[(0,s.jsx)("h2",{children:"Click to Roll Dice"}),(0,s.jsx)("div",{style:{width:"50px",height:"50px",backgroundColor:l?"gray":"antiquewhite",borderRadius:"15%",display:"flex",justifyContent:"center",alignItems:"center",cursor:l?"not-allowed":"pointer"},onClick:()=>{if(l)return;let e=o();n(e),t(e)},children:i})]})},u=e=>{let{players:t,cellPosition:r}=e;return(0,s.jsx)("div",{id:r,className:"".concat(o().cell," flex justify-around items-center"),children:t.map((e,t)=>(0,s.jsx)(p,{player:e,size:15},t))},r)},y=e=>{let{moves:t,boardGenerator:r,onBoardTransitionComplete:l}=e,[i,n]=(0,a.useState)(r.getBoard());return(0,a.useEffect)(()=>{let e=r.generateBoards(t);if(0===e.length){l();return}let s=e.map((e,t)=>setTimeout(()=>{n(e.board),e.transitioning||l()},500*t));return()=>{s.forEach(e=>clearTimeout(e))}},[t]),(0,s.jsxs)("div",{className:o().boardContainer,children:[(0,s.jsx)("div",{className:"grid grid-cols-10 gap-x-0 gap-y-0] ".concat(o().board," -z-10"),children:i.map(e=>{let{players:t,cellPosition:r}=e;return(0,s.jsx)(u,{players:t,cellPosition:r},r)})}),(0,s.jsx)(h.default,{alt:"board",src:"/board.jpg",className:o().boardImage,fill:!0})]})},p=e=>{let{player:t,size:r}=e,a=t.isPlaying?"animate-ping":"";return(0,s.jsxs)("span",{className:"relative flex",children:[(0,s.jsx)("span",{className:"absolute inline-flex ".concat(a," opacity-85"),style:{backgroundColor:t.color,width:r,height:r,borderRadius:"50%"}}),(0,s.jsx)("span",{className:"opacity-80",style:{backgroundColor:t.color,width:r,height:r,borderRadius:"50%"}})]})},m=e=>{let{players:t}=e;return(0,s.jsxs)("div",{className:"flex flex-col items-center w-full",children:[(0,s.jsx)("h1",{children:"Players"}),(0,s.jsx)("div",{className:"flex justify-around w-full",children:t.map((e,t)=>(0,s.jsxs)("div",{className:"flex flex-col items-center justify-around h-24",children:[(0,s.jsx)("h4",{children:e.name}),(0,s.jsx)(p,{player:e,size:30})]},t))})]})},g=e=>{let{winner:t}=e;return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center w-full h-1/3 z-10 absolute",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:[(0,s.jsxs)("h1",{className:"text-4xl text-white mb-4",children:["Winner: ",t.name]}),(0,s.jsx)(p,{player:t,size:50}),(0,s.jsx)(d.A,{mode:"fall",particleCount:500,colors:["#ff577f","#ff884b","#ffd384","#fff9b0"]})]})},f=e=>{let{coreSAL:t,boardGenerator:r}=e,[l,i]=(0,a.useState)(t.getState()),[n,d]=(0,a.useState)(!1),[h,u]=(0,a.useState)([]);return(0,s.jsxs)("div",{className:o().game,children:[l.winner&&(0,s.jsx)(g,{winner:l.winner}),(0,s.jsx)(y,{moves:l.moves,boardGenerator:r,onBoardTransitionComplete:()=>{d(!1),u([])}}),(0,s.jsxs)("div",{className:o().playerInformation,children:[(0,s.jsx)(m,{players:l.players}),(0,s.jsx)(c,{onRoll:e=>{let r=[...h,e];u(r),t.canRollMore(r)||(d(!0),i(t.playMove(r)))},randomGenerator:Math.random,isDisabled:n}),(0,s.jsxs)("h2",{children:["Total dice value: ",h.reduce((e,t)=>e+t,0)]})]})]})};function x(){let e=new l,t=new i;return t.generateBoard([],1,1),(0,s.jsx)(f,{coreSAL:e,boardGenerator:t})}},5047:e=>{e.exports={cell:"styles_cell__1WzH_",board:"styles_board__9sHka",boardContainer:"styles_boardContainer__kWAbe",game:"styles_game__mGn1g",playerInformation:"styles_playerInformation__40Qqs",boardImage:"styles_boardImage__PX2yg"}}},e=>{var t=t=>e(e.s=t);e.O(0,[64,362,441,517,358],()=>t(1311)),_N_E=e.O()}]);